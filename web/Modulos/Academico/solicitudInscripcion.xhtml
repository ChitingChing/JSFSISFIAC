<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"      
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h5="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:composition template="/templates/masterLayout.xhtml">
            <ui:define name="leftContent"></ui:define>
            <ui:define name="content">     
                <h:outputStylesheet name="inscripcion.css" library="css"/>
                <h:outputStylesheet name="fileinput.css" library="css"/>
                <h:outputScript name="fileinput.min.js" library="js"/>
                <h:outputScript name="verFoto.js" library="js"/>
                <h:form id="form" enctype="multipart/form-data" >
                    <p:growl id="messages" showDetail="true" />
                    <div class="encabezado">
                        <h1 style="text-align: center;">Solicitud de Inscripción</h1>     

                        <p:panel header="Seleccionar Maestría">                            
                            <p:panelGrid id="panel" columns="3" columnClasses="ui-grid-col-3,ui-grid-col-5" layout="grid" styleClass="ui-panelgrid-blank">

                                <h:outputLabel for="maestria" value="Seleccionar Maestría: " styleClass="labelDerecha" />
                                <h:selectOneMenu id="maestria" class="form-control " value="#{inscripcionBean.idMaestria}" >  
                                    <p:ajax listener="#{inscripcionBean.onMaestriaChange}" update="promocion" />
                                    <p:effect type="fade" event="change" for="datos">
                                        <f:param name="mode" value="'hide'" />
                                    </p:effect>
                                    <f:selectItem itemLabel="Ninguno" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{inscripcionBean.maestrias}"  />  
                                </h:selectOneMenu>  
                                <div></div>         

                                <h:outputLabel for="promocion" value="Seleccionar Promocion: " styleClass="labelDerecha" />
                                <h:selectOneMenu id="promocion" class="form-control " value="#{inscripcionBean.idPromo}"  >                             
                                    <p:ajax listener="#{inscripcionBean.onPromoChange}" update="datos" />
                                    <f:selectItem itemLabel="Ninguno" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{inscripcionBean.promociones}"  />  
                                </h:selectOneMenu>  
                                <div></div>  
                                <h:inputHidden/>  
                                <p:commandButton type="button" value="Show" style="display:block" icon="ui-icon-image">
                                    <p:effect type="fade" event="click" for="datos">
                                        <f:param name="mode" value="'show'" />
                                    </p:effect>
                                </p:commandButton>
                                <div></div>  
                            </p:panelGrid>
                        </p:panel>



                    </div>
                    <p:wizard id="datos" flowListener="#{userWizard.onFlowProcess}" style="display:none;" backLabel="Regresar" nextLabel="Siguiente" step="requisitos" >

                        <p:tab id="personal" title="Personal">
                            <p:panel header="Información Personal">
                                <p:messages closable="true" />
                                <h:panelGrid columns="4" cellspacing="5px" >
                                    <h:outputLabel for="cedPas" value="Cédula o Pasaporte: " />
                                    <p:inputText  required="true" id="cedPas" class="form-control "/>

                                    <h:outputLabel for="estCivil" value="Estado Civil: " />
                                    <h:selectOneMenu id="estCivil" class="form-control">
                                        <f:selectItem itemLabel="Soltero" itemValue="S" />
                                        <f:selectItem itemLabel="Casado" itemValue="C" />
                                        <f:selectItem itemLabel="Divorciado" itemValue="D" />
                                        <f:selectItem itemLabel="Viudo" itemValue="V" />
                                        <f:selectItem itemLabel="Union Libre" itemValue="U" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="nombres" value="Nombres: " />
                                    <p:inputText  required="true" id="nombres" class="form-control "/>

                                    <h:outputLabel for="apellidos" value="Apellidos: " />
                                    <p:inputText  required="true" id="apellidos" class="form-control "/>

                                    <h:outputLabel for="fNac" value="Fecha de Nacimiento: " />
                                    <p:calendar  id="fNac" required="true" navigator="true" mask="true" pattern="dd/MM/yyyy" mindate="01/01/1940" maxdate="#{validadorFecha.fechaMax}"  />                                  

                                    <h:outputLabel for="email" value="Email: " />
                                    <p:inputText  required="true" id="email" class="form-control  "/>
                                    <h:outputLabel for="celular" value="Celular: " />
                                    <p:inputMask id="celular"  required="true" class="form-control" mask="99-99999999" />
                                    <h:outputLabel for="sexo" value="Sexo: " />
                                    <h:selectOneMenu id="sexo" class="form-control">
                                        <f:selectItem itemLabel="Masculino" itemValue="M" />
                                        <f:selectItem itemLabel="Femenino" itemValue="F" />
                                    </h:selectOneMenu>
                                    <h:outputLabel for="paisO" value="País de Origen: "/>
                                    <h:selectOneMenu id="paisO" class="form-control" value="#{inscripcionBean.idPaisOrigen}">
                                        <f:selectItem itemLabel="Ninguno" itemValue="" noSelectionOption="true" />
                                        <f:selectItems value="#{inscripcionBean.lstPais}"  />  
                                        
                                    </h:selectOneMenu>

                                    <h:outputLabel for="provinciaNac" value="Provincia de Nacimiento: "/>
                                    <h:selectOneMenu id="provinciaNac" class="form-control" value="#{inscripcionBean.idProvinciaNac}">
                                        <p:ajax listener="#{inscripcionBean.onProvinciaNacChange()}" update="cantonNac" />
                                        
                                        <f:selectItem itemLabel="Ninguno" itemValue="" noSelectionOption="true" />
                                        <f:selectItems value="#{inscripcionBean.provincias}"  />  
                                    </h:selectOneMenu>
                                    <h:outputLabel for="cantonNac" value="Cantón de Nacimiento: " />
                                    <h:selectOneMenu id="cantonNac" class="form-control" value="#{inscripcionBean.idCantonNac}">
                                        <p:ajax listener="#{inscripcionBean.onCantonNacChange()}" update="parroquiaNac" />
                                        <f:selectItem itemLabel="Ninguno" itemValue="" noSelectionOption="true" />
                                        <f:selectItems value="#{inscripcionBean.cantones}"  />  
                                    </h:selectOneMenu>
                                    <h:outputLabel for="parroquiaNac" value="Parroquia de Nacimiento: "/>
                                    <h:selectOneMenu id="parroquiaNac" class="form-control" required="true" value="#{inscripcionBean.idParroquiaNac}">
                                       <f:selectItem itemLabel="Ninguno" itemValue="" noSelectionOption="true" />
                                        <f:selectItems value="#{inscripcionBean.parroquias}"  /> 
                                    </h:selectOneMenu>

                                </h:panelGrid>
                            </p:panel>
                        </p:tab>
                        <p:tab id="domicilio" title="Domicilio">
                            <p:panel header="Información Domiciliaria">
                                <p:messages closable="true" />
                                <h:panelGrid columns="4" >
                                    <h:outputLabel for="provinciaDom" value="Provincia: "/>
                                    <h:selectOneMenu id="provinciaDom" class="form-control">
                                        <f:selectItem itemLabel="Los Ríos" itemValue="M" />
                                        <f:selectItem itemLabel="Otros" itemValue="F" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="cantonDom" value="Cantón: "/>
                                    <h:selectOneMenu id="cantonDom" class="form-control">
                                        <f:selectItem itemLabel="Quevedo" itemValue="M" />
                                        <f:selectItem itemLabel="Extranjero" itemValue="F" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="parroquiaDom" value="Parroquia: "/>
                                    <h:selectOneMenu id="parroquiaDom" class="form-control">
                                        <f:selectItem itemLabel="Quevedo" itemValue="M" />
                                        <f:selectItem itemLabel="Extranjero" itemValue="F" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="direccionDom" value="Dirección: " />
                                    <p:inputText  required="true" id="direccionDom" class="form-control "/>

                                    <h:outputLabel for="telefono" value="Teléfono: " />
                                    <p:inputMask id="telefono"  required="true" class="form-control" mask="99-99999999" />

                                </h:panelGrid>
                            </p:panel>
                        </p:tab>
                        <p:tab id="laboral" title="Laboral">
                            <p:panel header="Información Laboral">
                                <p:messages closable="true" />
                                <h:panelGrid columns="4" >
                                    <h:outputLabel for="provinciaTra" value="Provincia: "/>
                                    <h:selectOneMenu id="provinciaTra" class="form-control">
                                        <f:selectItem itemLabel="Los Ríos" itemValue="M" />
                                        <f:selectItem itemLabel="Otros" itemValue="F" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="cantonTra" value="Cantón: "/>
                                    <h:selectOneMenu id="cantonTra" class="form-control">
                                        <f:selectItem itemLabel="Quevedo" itemValue="M" />
                                        <f:selectItem itemLabel="Extranjero" itemValue="F" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="parroquiaTra" value="Parroquia: "/>
                                    <h:selectOneMenu id="parroquiaTra" class="form-control">
                                        <f:selectItem itemLabel="Quevedo" itemValue="M" />
                                        <f:selectItem itemLabel="Extranjero" itemValue="F" />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="empresa" value="Empresa: " />
                                    <p:inputText  required="true" id="empresa" class="form-control "/>

                                    <h:outputLabel for="telefonoTra" value="Teléfono: " />
                                    <p:inputMask id="telefonoTra"  required="true" class="form-control" mask="99-99999999" />

                                    <h:outputLabel for="direccionTra" value="Dirección: " />
                                    <p:inputText  required="true" id="direccionTra" class="form-control "/>

                                    <h:outputLabel for="emailTra" value="Email: " />
                                    <p:inputText  required="true" id="emailTra" class="form-control  "/>

                                </h:panelGrid>
                            </p:panel>
                        </p:tab>
                        <p:tab id="academica" title="Académica">
                            <p:panel header="Información Académica">
                                <p:messages closable="true" />
                                <h:panelGrid columns="4" >
                                    <h:outputLabel for="titulo" value="Título: " />
                                    <p:inputText  required="true" id="titulo" class="form-control "/>

                                    <h:outputLabel for="universidad" value="Universidad: "/>
                                    <h:selectOneMenu id="universidad" class="form-control">
                                        <f:selectItem itemLabel="Universidad Tecnica Estatal de Quevedo" itemValue="Universidad Tecnica Estatal de Quevedo" />
                                        <f:selectItem itemLabel="Otro" itemValue="Otro"  />
                                    </h:selectOneMenu>

                                    <h:outputLabel for="universidadNueva" value="Nombre Universidad: " />
                                    <p:inputText  required="true" id="universidadNueva" class="form-control "/>

                                    <h:outputLabel for="nregistro" value="Número de registro del Senecyt: " />
                                    <p:inputText  required="true" id="nregistro" class="form-control "/>

                                </h:panelGrid>
                                
                            </p:panel>
                        </p:tab>
                        <p:tab id="requisitos" title="Requisitos" >
                            <p:panel header="Requisitos">
                                <p:messages closable="true" />
                                <h:panelGrid columns="1" width="100%" >                                    
                                    <ui:repeat value="#{inscripcionBean.lstClsR}" var="r" >
                                        <h:outputLabel  value="#{r.descripcion}" />
                                        <p:fileUpload required="true" rendered="#{r.descripcion eq 'Foto'}" fileLimit="1"  allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
                                        <p:fileUpload required="true" rendered="#{r.descripcion ne 'Foto'}" fileLimit="1"  allowTypes="/(\.|\/)(pdf)$/" />
                                    </ui:repeat>
                                    
                                </h:panelGrid>
                                <p:commandButton value="Submit" process="@this" />
                            </p:panel>
                        </p:tab>                        
                        
                    </p:wizard>


                </h:form>
                <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

                <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                    <p:graphicImage class="imgAjax" value="#{resource['img/ajax-loader.gif']}"  />
                </p:dialog>

                <h:outputScript name="jquery.bootstrap.wizard.min.js" library="js"/>
                <h:outputScript name="jquery.validate.min.js" library="js"/>
                <h:outputScript name="messages_es.min.js" library="js"/>
                <h:outputScript name="validarInscripcion.js" library="js"/> 
                <h:outputScript name="vistaPrevia.js" library="js"/> 

                <script type="text/javascript">

                 /*    $(document).ready(function () {

                              $("#form\\:maestria").change(function () {
                         var x = $("#form\\:maestria").val();
                         $("#form\\:idM").val(x);
                         });
                         
                         $("#form\\:promocion").change(function () {
                         var x = $("#form\\:promocion").val();
                         $("#form\\:idP").val(x);
                         });
                         */

                     /*   $("#rootwizard").hide();
                        var val;
                        $("#form\\:paisO").change(function () {
                            val = $("#form\\:paisO").val();
                            if (val !== "Ec")
                            {
                                $("#cantonNac").hide();
                                $("#provinciaNac").hide();
                                $("#parroquiaNac").hide();
                            } else {
                                $("#cantonNac").show();
                                $("#provinciaNac").show();
                                $("#parroquiaNac").show();
                            }
                        });
                        $("#form\\:universidad").change(function () {
                            val = $("#form\\:universidad").val();
                            if (val !== "Otro")
                            {
                                $("#universidadNueva").hide();
                            } else {
                                $("#universidadNueva").show();
                            }
                        });
                        $("#btn-maestria").click(function () {
                            val = $("#form\\:maestria").val();
                            if (val === "")
                            {
                                $("#rootwizard").hide();
                            } else {
                                $("#rootwizard").show();
                            }

                        });
                    });
                    */

                </script>

            </ui:define>
        </ui:composition>
    </h:body>
</html>

